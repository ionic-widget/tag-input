angular.module("ui.taginput",[]).directive("tagInput",["$timeout",function(t){return{restrict:"E",replace:!0,scope:{tags:"=",inputModel:"=",placeholder:"@",icon:"@"},template:'<div class="item secondary-search-bar category-search-bar"><span class="icon ion {{icon}}"></span><tag-list tags="tags"></tag-list><growing-input placeholder="{{placeholder}}" input-model="inputModel"></growing-input</div>',link:function(e,n){var i=n.find("input")[0];n.bind("click",function(e){e.target==n[0]&&t(function(){i.focus()})}),angular.element(i).bind("keydown keypress",function(n){""===e.inputModel.value&&(8!==n.keyCode&&46!==n.keyCode||(t(function(){e.tags.pop()}),n.preventDefault()))}),e.$watch("tags.length",function(){t(function(){n[0].scrollLeft=n[0].scrollWidth})})}}}]).directive("tagList",function(){return{restrict:"E",scope:{tags:"="},template:'<div class="tag-container"><pill ng-repeat="(idx, tag) in tags" ng-click="removeTag(idx)" class="category-pill">{{ tag.value }} <i class="ion-close-round"></i></pill></div>',link:function(t){t.removeTag=function(e){e>=0&&t.tags.splice(e,1)},t.removeTag()}}}).directive("growingInput",function(){return{restrict:"E",scope:{placeholder:"@",inputModel:"="},template:'<div class="growingInput"><input type="text" placeholder="{{placeholder}}" ng-model="inputModel.value"><span class="hiddenText">{{inputModel.value || placeholder}}</span></div>',link:function(t,e){var n=e.find("input"),i=e.find("span");t.$watch("inputModel.value",function(){var t=i.width()+20;n.css("width",t+"px")})}}});